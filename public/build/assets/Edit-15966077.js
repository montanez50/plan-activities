import{q as b,W as v,j as e,a as f}from"./app-4c705fe6.js";import{d as g,_ as y,A as N}from"./AppLayout-0f93b663.js";import{C}from"./Card-d9e69080.js";import{I as i}from"./Input-cba5d638.js";import{S as _}from"./Select-dce6251c.js";import{B as d}from"./Button-3b469960.js";import{I as m}from"./IconPointFilled-8d19721b.js";import{I as w}from"./IconPencilPlus-dad188cb.js";import{I as k}from"./IconPencilX-5bf6002a.js";import"./createReactComponent-33fd3947.js";import"./react-select.esm-f1e8e4dc.js";function I(){const{user:a,roles:c,dependencies:p}=b().props,{data:r,setData:t,post:x,errors:n}=v({name:a.name,last_name:a.last_name??"",email:a.email,rolesData:a.roles.map(s=>s.name),password:"",password_confirmation:"",_method:"put",dependency:{value:a.dependency_id,label:a.dependency.name}}),u=s=>{let l=r.rolesData;l.some(o=>o===s.target.value)?l=l.filter(o=>o!==s.target.value):l.push(s.target.value),t("rolesData",l)},h=async s=>{s.preventDefault(),x(`/apps/users/${a.id}`,{onSuccess:()=>{y.success("Data successfully updated!",{icon:"👏",style:{borderRadius:"10px",background:"#333",color:"#fff"}})}})};return e.jsxs(e.Fragment,{children:[e.jsx(f,{title:"Editar Usuario"}),e.jsx(C,{title:"Editar Usuario",icon:e.jsx(g,{size:"20",strokeWidth:"1.5"}),children:e.jsxs("form",{onSubmit:h,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"mb-4",children:e.jsx(i,{label:"Nombre",type:"text",value:r.name,onChange:s=>t("name",s.target.value),errors:n.name})}),e.jsx("div",{className:"mb-4",children:e.jsx(i,{label:"Apellido",type:"text",value:r.last_name,onChange:s=>t("last_name",s.target.value),errors:n.last_name})}),e.jsx("div",{className:"mb-4",children:e.jsx(i,{label:"Email",type:"email",value:r.email,onChange:s=>t("email",s.target.value),errors:n.email})}),e.jsx("div",{className:"mb-4",children:e.jsx(_,{label:"Dependencia",options:p,value:r.dependency,onChange:s=>t("dependency",s),errors:n.dependency})}),e.jsx("div",{className:"mb-4",children:e.jsx(i,{label:"Contraseña",type:"password",value:r.password,onChange:s=>t("password",s.target.value),errors:n.password})}),e.jsx("div",{className:"mb-4",children:e.jsx(i,{label:"Confirmar Contraseña",type:"password",value:r.password_confirmation,onChange:s=>t("password_confirmation",s.target.value),errors:n.password_confirmation})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-gray-600 text-sm",children:"Roles"}),e.jsx("div",{className:"grid grid-cols-1 gap-x-3 gap-y-1.5 h-[400px] overflow-y-auto",children:c.map((s,l)=>e.jsxs("div",{className:"border-b px-4 py-2 border-dashed",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[e.jsx("input",{type:"checkbox",className:"rounded-full",value:s.name,defaultChecked:r.rolesData.some(o=>o===s.name),onChange:u,id:`check-${s.id}`}),e.jsx("div",{className:"font-semibold",children:s.name})]}),s.name!=="administrador"?e.jsx("div",{className:"flex flex-wrap items-center gap-4 ml-5",children:s.permissions.map((o,j)=>e.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-1",children:[e.jsx(m,{strokeWidth:"1.5",size:"15"}),o.name]},j))}):e.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-1 ml-5",children:[e.jsx(m,{strokeWidth:"1.5",size:"15"})," all permissions"]})]},l))})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(d,{label:"Guardar",icon:e.jsx(w,{strokeWidth:"1.5",size:"20"}),className:"bg-teal-200 text-teal-500 border border-teal-300 hover:border-teal-500"}),e.jsx(d,{label:"Cancelar",icon:e.jsx(k,{strokeWidth:"1.5",size:"20"}),className:"bg-rose-200 text-rose-500 border border-rose-300 hover:border-rose-500",type:"link",href:"/apps/users"})]})]})})]})}I.layout=a=>e.jsx(N,{children:a});export{I as default};
